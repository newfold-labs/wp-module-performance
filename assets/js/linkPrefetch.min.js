window.addEventListener("load",(()=>{const e=document.createElement("link"),t=e.relList&&e.relList.supports&&e.relList.supports("prefetch"),i=navigator.connection&&(navigator.connection.saveData||(navigator.connection.effectiveType||"").includes("2g")),n=window.IntersectionObserver&&"isIntersecting"in IntersectionObserverEntry.prototype;if(t&&!i){class e{constructor(e){this.config=e,this.activeOnDesktop=e.activeOnDesktop,this.behavior=e.behavior,this.hoverDelay=e.hoverDelay,this.ignoreKeywords=e.ignoreKeywords.split(","),this.instantClick=e.instantClick,this.mobileActive=e.mobileActive,this.isMobile=e.isMobile,this.mobileBehavior=e.mobileBehavior,this.prefetchedUrls=new Set,this.timerIdentifier,this.eventListenerOptions={capture:!0,passive:!0}}init(){const e=navigator.userAgent.indexOf("Chrome/")>-1,t=e&&parseInt(navigator.userAgent.substring(navigator.userAgent.indexOf("Chrome/")+7));if(!(e&&t<110)&&(!this.isMobile||this.mobileActive)&&(this.isMobile||this.activeOnDesktop)){if(!this.isMobile)if("mouseHover"===this.behavior){let e=parseInt(this.hoverDelay);e=isNaN(e)?60:e,document.addEventListener("mouseover",this.mouseHover.bind(this),this.eventListenerOptions)}else"mouseDown"===this.behavior&&(this.instantClick?document.addEventListener("mousedown",this.mouseDownToClick.bind(this),this.eventListenerOptions):document.addEventListener("mousedown",this.mouseDown.bind(this),this.eventListenerOptions));this.mobileActive&&("touchstart"===this.mobileBehavior?document.addEventListener("touchstart",this.touchstart.bind(this),this.eventListenerOptions):n&&this.viewport())}}viewport(){const e=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const i=t.target;e.unobserve(i),this.canPrefetch(i)&&this.prefetchIt(i.href)}}))}));(window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)})((()=>setTimeout((function(){return document.querySelectorAll("a").forEach((function(t){return e.observe(t)}))}),1e3)),{timeout:1e3})}mouseDown(e){const t=e.target.closest("a");this.canPrefetch(t)&&this.prefetchIt(t.href)}mouseDownToClick(e){const t=e.target.closest("a");if(e.which>1||e.metaKey||e.ctrlKey)return;if(!t)return;t.addEventListener("click",(function(e){"lpappinstantclick"!=e.detail&&e.preventDefault()}),{capture:!0,passive:!1,once:!0});const i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1,detail:"lpappinstantclick"});t.dispatchEvent(i)}touchstart(e){const t=e.target.closest("a");this.canPrefetch(t)&&this.prefetchIt(t.href)}clean(e){(e.relatedTarget&&e.target.closest("a")==e.relatedTarget.closest("a")||this.timerIdentifier)&&(clearTimeout(this.timerIdentifier),this.timerIdentifier=void 0)}mouseHover(e){if(!("closest"in e.target))return;const t=e.target.closest("a");this.canPrefetch(t)&&(t.addEventListener("mouseout",this.clean.bind(this),{passive:!0}),this.timerIdentifier=setTimeout((()=>{this.prefetchIt(t.href),this.timerIdentifier=void 0}),this.hoverDelay))}canPrefetch(e){if(e&&e.href){if(this.prefetchedUrls.has(e.href))return!1;if(e.href.replace(/\/$/,"")!==location.origin.replace(/\/$/,"")&&e.href.replace(/\/$/,"")!==location.href.replace(/\/$/,""))return!0;if(this.ignoreKeywords.filter((t=>{if(e.href.indexOf(t)>-1)return t})).length>0)return!1}return!1}prefetchIt(e){const t=document.createElement("link");t.rel="prefetch",t.href=e,t.as="document",document.head.appendChild(t),this.prefetchedUrls.add(e)}}new e(window.LP_CONFIG).init()}}));